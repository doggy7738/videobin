import{r as y,j as t,c as Z,a8 as ws,k as Ns,A as Yt}from"./vendor-gsXmkB4L.js";import{U as mt,V as ze,C as Y,W as Cs,u as Jt,X as Ss,Y as et,Z as Qt,B as ae,_ as Zt,$ as Vt,a0 as Is,a1 as en,a2 as Ht,a3 as Ts,a4 as tn,a5 as xt,a6 as Ke,a7 as ft,a8 as zt,a9 as He,aa as As,ab as _s,o as nn,ac as Ps,ad as sn,ae as bt,af as rn,ag as ht,L as ks,ah as Es,ai as an,aj as Ds,k as Os,ak as Kt,al as Ls,am as cn,b as Bs,an as Us,ao as Rs,ap as Ft,aq as Gt,ar as $t,p as Ee,as as Ms,at as Hs,au as zs,av as Ks,aw as Fs,ax as Gs,ay as $s}from"./index-CyOPYblY.js";import{c as Qe,g as Ws}from"./auth-72H9TcpW.js";import{b as H,d as pt,T as on,a as qs,k as Xs,K as be,p as Ys,s as Js,t as ln,v as Qs,w as Zs,x as Vs,y as er,C as vt,z as tr,A as nr,D as sr,E as rr,G as ar,J as ir,M as Wt,N as cr,O as or,P as lr,Q as dr}from"./react-dom-CGt3jsK4.js";import{I as de,a as $,s as ur,F as gr,g as fr}from"./Icons-BYJI8CLw.js";import"./hls-DnSDjNdB.js";import"./language-db-D2qFPvUE.js";import"./caption-parsing-uynzXXjB.js";import"./locales-DcUbfxfW.js";var tt={exports:{}};tt.exports;(function(n,r){var a=200,o="__lodash_hash_undefined__",c=1,h=2,l=9007199254740991,d="[object Arguments]",u="[object Array]",x="[object AsyncFunction]",b="[object Boolean]",p="[object Date]",j="[object Error]",w="[object Function]",z="[object GeneratorFunction]",O="[object Map]",S="[object Number]",L="[object Null]",A="[object Object]",N="[object Promise]",T="[object Proxy]",K="[object RegExp]",B="[object Set]",G="[object String]",ie="[object Symbol]",ue="[object Undefined]",m="[object WeakMap]",q="[object ArrayBuffer]",te="[object DataView]",pe="[object Float32Array]",f="[object Float64Array]",E="[object Int8Array]",P="[object Int16Array]",ce="[object Int32Array]",ve="[object Uint8Array]",W="[object Uint8ClampedArray]",De="[object Uint16Array]",Oe="[object Uint32Array]",ne=/[\\^$.*+?()[\]{}|]/g,ye=/^\[object .+?Constructor\]$/,Te=/^(?:0|[1-9]\d*)$/,C={};C[pe]=C[f]=C[E]=C[P]=C[ce]=C[ve]=C[W]=C[De]=C[Oe]=!0,C[d]=C[u]=C[q]=C[b]=C[te]=C[p]=C[j]=C[w]=C[O]=C[S]=C[A]=C[K]=C[B]=C[G]=C[m]=!1;var Le=typeof Qe=="object"&&Qe&&Qe.Object===Object&&Qe,Ae=typeof self=="object"&&self&&self.Object===Object&&self,R=Le||Ae||Function("return this")(),V=r&&!r.nodeType&&r,D=V&&!0&&n&&!n.nodeType&&n,je=D&&D.exports===V,ge=je&&Le.process,fe=function(){try{return ge&&ge.binding&&ge.binding("util")}catch{}}(),_e=fe&&fe.isTypedArray;function Pe(e,s){for(var i=-1,g=e==null?0:e.length,I=0,v=[];++i<g;){var k=e[i];s(k,i,e)&&(v[I++]=k)}return v}function rt(e,s){for(var i=-1,g=s.length,I=e.length;++i<g;)e[I+i]=s[i];return e}function jt(e,s){for(var i=-1,g=e==null?0:e.length;++i<g;)if(s(e[i],i,e))return!0;return!1}function at(e,s){for(var i=-1,g=Array(e);++i<e;)g[i]=s(i);return g}function xn(e){return function(s){return e(s)}}function bn(e,s){return e.has(s)}function pn(e,s){return e==null?void 0:e[s]}function vn(e){var s=-1,i=Array(e.size);return e.forEach(function(g,I){i[++s]=[I,g]}),i}function yn(e,s){return function(i){return e(s(i))}}function jn(e){var s=-1,i=Array(e.size);return e.forEach(function(g){i[++s]=g}),i}var wn=Array.prototype,Nn=Function.prototype,Fe=Object.prototype,it=R["__core-js_shared__"],wt=Nn.toString,se=Fe.hasOwnProperty,Nt=function(){var e=/[^.]+$/.exec(it&&it.keys&&it.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Ct=Fe.toString,Cn=RegExp("^"+wt.call(se).replace(ne,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),St=je?R.Buffer:void 0,Ge=R.Symbol,It=R.Uint8Array,Tt=Fe.propertyIsEnumerable,Sn=wn.splice,we=Ge?Ge.toStringTag:void 0,At=Object.getOwnPropertySymbols,In=St?St.isBuffer:void 0,Tn=yn(Object.keys,Object),ct=ke(R,"DataView"),Be=ke(R,"Map"),ot=ke(R,"Promise"),lt=ke(R,"Set"),dt=ke(R,"WeakMap"),Ue=ke(Object,"create"),An=Se(ct),_n=Se(Be),Pn=Se(ot),kn=Se(lt),En=Se(dt),_t=Ge?Ge.prototype:void 0,ut=_t?_t.valueOf:void 0;function Ne(e){var s=-1,i=e==null?0:e.length;for(this.clear();++s<i;){var g=e[s];this.set(g[0],g[1])}}function Dn(){this.__data__=Ue?Ue(null):{},this.size=0}function On(e){var s=this.has(e)&&delete this.__data__[e];return this.size-=s?1:0,s}function Ln(e){var s=this.__data__;if(Ue){var i=s[e];return i===o?void 0:i}return se.call(s,e)?s[e]:void 0}function Bn(e){var s=this.__data__;return Ue?s[e]!==void 0:se.call(s,e)}function Un(e,s){var i=this.__data__;return this.size+=this.has(e)?0:1,i[e]=Ue&&s===void 0?o:s,this}Ne.prototype.clear=Dn,Ne.prototype.delete=On,Ne.prototype.get=Ln,Ne.prototype.has=Bn,Ne.prototype.set=Un;function oe(e){var s=-1,i=e==null?0:e.length;for(this.clear();++s<i;){var g=e[s];this.set(g[0],g[1])}}function Rn(){this.__data__=[],this.size=0}function Mn(e){var s=this.__data__,i=We(s,e);if(i<0)return!1;var g=s.length-1;return i==g?s.pop():Sn.call(s,i,1),--this.size,!0}function Hn(e){var s=this.__data__,i=We(s,e);return i<0?void 0:s[i][1]}function zn(e){return We(this.__data__,e)>-1}function Kn(e,s){var i=this.__data__,g=We(i,e);return g<0?(++this.size,i.push([e,s])):i[g][1]=s,this}oe.prototype.clear=Rn,oe.prototype.delete=Mn,oe.prototype.get=Hn,oe.prototype.has=zn,oe.prototype.set=Kn;function Ce(e){var s=-1,i=e==null?0:e.length;for(this.clear();++s<i;){var g=e[s];this.set(g[0],g[1])}}function Fn(){this.size=0,this.__data__={hash:new Ne,map:new(Be||oe),string:new Ne}}function Gn(e){var s=qe(this,e).delete(e);return this.size-=s?1:0,s}function $n(e){return qe(this,e).get(e)}function Wn(e){return qe(this,e).has(e)}function qn(e,s){var i=qe(this,e),g=i.size;return i.set(e,s),this.size+=i.size==g?0:1,this}Ce.prototype.clear=Fn,Ce.prototype.delete=Gn,Ce.prototype.get=$n,Ce.prototype.has=Wn,Ce.prototype.set=qn;function $e(e){var s=-1,i=e==null?0:e.length;for(this.__data__=new Ce;++s<i;)this.add(e[s])}function Xn(e){return this.__data__.set(e,o),this}function Yn(e){return this.__data__.has(e)}$e.prototype.add=$e.prototype.push=Xn,$e.prototype.has=Yn;function me(e){var s=this.__data__=new oe(e);this.size=s.size}function Jn(){this.__data__=new oe,this.size=0}function Qn(e){var s=this.__data__,i=s.delete(e);return this.size=s.size,i}function Zn(e){return this.__data__.get(e)}function Vn(e){return this.__data__.has(e)}function es(e,s){var i=this.__data__;if(i instanceof oe){var g=i.__data__;if(!Be||g.length<a-1)return g.push([e,s]),this.size=++i.size,this;i=this.__data__=new Ce(g)}return i.set(e,s),this.size=i.size,this}me.prototype.clear=Jn,me.prototype.delete=Qn,me.prototype.get=Zn,me.prototype.has=Vn,me.prototype.set=es;function ts(e,s){var i=Xe(e),g=!i&&xs(e),I=!i&&!g&&gt(e),v=!i&&!g&&!I&&Rt(e),k=i||g||I||v,U=k?at(e.length,String):[],M=U.length;for(var _ in e)se.call(e,_)&&!(k&&(_=="length"||I&&(_=="offset"||_=="parent")||v&&(_=="buffer"||_=="byteLength"||_=="byteOffset")||us(_,M)))&&U.push(_);return U}function We(e,s){for(var i=e.length;i--;)if(Ot(e[i][0],s))return i;return-1}function ns(e,s,i){var g=s(e);return Xe(e)?g:rt(g,i(e))}function Re(e){return e==null?e===void 0?ue:L:we&&we in Object(e)?ls(e):hs(e)}function Pt(e){return Me(e)&&Re(e)==d}function kt(e,s,i,g,I){return e===s?!0:e==null||s==null||!Me(e)&&!Me(s)?e!==e&&s!==s:ss(e,s,i,g,kt,I)}function ss(e,s,i,g,I,v){var k=Xe(e),U=Xe(s),M=k?u:he(e),_=U?u:he(s);M=M==d?A:M,_=_==d?A:_;var X=M==A,ee=_==A,F=M==_;if(F&&gt(e)){if(!gt(s))return!1;k=!0,X=!1}if(F&&!X)return v||(v=new me),k||Rt(e)?Et(e,s,i,g,I,v):cs(e,s,M,i,g,I,v);if(!(i&c)){var J=X&&se.call(e,"__wrapped__"),Q=ee&&se.call(s,"__wrapped__");if(J||Q){var xe=J?e.value():e,le=Q?s.value():s;return v||(v=new me),I(xe,le,i,g,v)}}return F?(v||(v=new me),os(e,s,i,g,I,v)):!1}function rs(e){if(!Ut(e)||fs(e))return!1;var s=Lt(e)?Cn:ye;return s.test(Se(e))}function as(e){return Me(e)&&Bt(e.length)&&!!C[Re(e)]}function is(e){if(!ms(e))return Tn(e);var s=[];for(var i in Object(e))se.call(e,i)&&i!="constructor"&&s.push(i);return s}function Et(e,s,i,g,I,v){var k=i&c,U=e.length,M=s.length;if(U!=M&&!(k&&M>U))return!1;var _=v.get(e);if(_&&v.get(s))return _==s;var X=-1,ee=!0,F=i&h?new $e:void 0;for(v.set(e,s),v.set(s,e);++X<U;){var J=e[X],Q=s[X];if(g)var xe=k?g(Q,J,X,s,e,v):g(J,Q,X,e,s,v);if(xe!==void 0){if(xe)continue;ee=!1;break}if(F){if(!jt(s,function(le,Ie){if(!bn(F,Ie)&&(J===le||I(J,le,i,g,v)))return F.push(Ie)})){ee=!1;break}}else if(!(J===Q||I(J,Q,i,g,v))){ee=!1;break}}return v.delete(e),v.delete(s),ee}function cs(e,s,i,g,I,v,k){switch(i){case te:if(e.byteLength!=s.byteLength||e.byteOffset!=s.byteOffset)return!1;e=e.buffer,s=s.buffer;case q:return!(e.byteLength!=s.byteLength||!v(new It(e),new It(s)));case b:case p:case S:return Ot(+e,+s);case j:return e.name==s.name&&e.message==s.message;case K:case G:return e==s+"";case O:var U=vn;case B:var M=g&c;if(U||(U=jn),e.size!=s.size&&!M)return!1;var _=k.get(e);if(_)return _==s;g|=h,k.set(e,s);var X=Et(U(e),U(s),g,I,v,k);return k.delete(e),X;case ie:if(ut)return ut.call(e)==ut.call(s)}return!1}function os(e,s,i,g,I,v){var k=i&c,U=Dt(e),M=U.length,_=Dt(s),X=_.length;if(M!=X&&!k)return!1;for(var ee=M;ee--;){var F=U[ee];if(!(k?F in s:se.call(s,F)))return!1}var J=v.get(e);if(J&&v.get(s))return J==s;var Q=!0;v.set(e,s),v.set(s,e);for(var xe=k;++ee<M;){F=U[ee];var le=e[F],Ie=s[F];if(g)var Mt=k?g(Ie,le,F,s,e,v):g(le,Ie,F,e,s,v);if(!(Mt===void 0?le===Ie||I(le,Ie,i,g,v):Mt)){Q=!1;break}xe||(xe=F=="constructor")}if(Q&&!xe){var Ye=e.constructor,Je=s.constructor;Ye!=Je&&"constructor"in e&&"constructor"in s&&!(typeof Ye=="function"&&Ye instanceof Ye&&typeof Je=="function"&&Je instanceof Je)&&(Q=!1)}return v.delete(e),v.delete(s),Q}function Dt(e){return ns(e,vs,ds)}function qe(e,s){var i=e.__data__;return gs(s)?i[typeof s=="string"?"string":"hash"]:i.map}function ke(e,s){var i=pn(e,s);return rs(i)?i:void 0}function ls(e){var s=se.call(e,we),i=e[we];try{e[we]=void 0;var g=!0}catch{}var I=Ct.call(e);return g&&(s?e[we]=i:delete e[we]),I}var ds=At?function(e){return e==null?[]:(e=Object(e),Pe(At(e),function(s){return Tt.call(e,s)}))}:ys,he=Re;(ct&&he(new ct(new ArrayBuffer(1)))!=te||Be&&he(new Be)!=O||ot&&he(ot.resolve())!=N||lt&&he(new lt)!=B||dt&&he(new dt)!=m)&&(he=function(e){var s=Re(e),i=s==A?e.constructor:void 0,g=i?Se(i):"";if(g)switch(g){case An:return te;case _n:return O;case Pn:return N;case kn:return B;case En:return m}return s});function us(e,s){return s=s??l,!!s&&(typeof e=="number"||Te.test(e))&&e>-1&&e%1==0&&e<s}function gs(e){var s=typeof e;return s=="string"||s=="number"||s=="symbol"||s=="boolean"?e!=="__proto__":e===null}function fs(e){return!!Nt&&Nt in e}function ms(e){var s=e&&e.constructor,i=typeof s=="function"&&s.prototype||Fe;return e===i}function hs(e){return Ct.call(e)}function Se(e){if(e!=null){try{return wt.call(e)}catch{}try{return e+""}catch{}}return""}function Ot(e,s){return e===s||e!==e&&s!==s}var xs=Pt(function(){return arguments}())?Pt:function(e){return Me(e)&&se.call(e,"callee")&&!Tt.call(e,"callee")},Xe=Array.isArray;function bs(e){return e!=null&&Bt(e.length)&&!Lt(e)}var gt=In||js;function ps(e,s){return kt(e,s)}function Lt(e){if(!Ut(e))return!1;var s=Re(e);return s==w||s==z||s==x||s==T}function Bt(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=l}function Ut(e){var s=typeof e;return e!=null&&(s=="object"||s=="function")}function Me(e){return e!=null&&typeof e=="object"}var Rt=_e?xn(_e):as;function vs(e){return bs(e)?ts(e):is(e)}function ys(){return[]}function js(){return!1}n.exports=ps})(tt,tt.exports);var mr=tt.exports;const hr=Ws(mr);function re(n){const[r,a]=y.useState(void 0);y.useEffect(()=>{a(void 0)},[n]);const o=y.useMemo(()=>!hr(r,n)&&r!==void 0,[r,n]),c=y.useCallback(d=>{d instanceof Function?a(u=>d(u!==void 0?u:n)):a(d)},[n,a]),h=r===void 0?n:r,l=y.useCallback(()=>a(void 0),[a]);return[h,c,l,o]}function xr(n,r,a,o,c,h,l,d,u,x){const[b,p,j,w]=re(c),[z,O,S,L]=re(h),[A,N,T,K]=re(n),B=mt(at=>at.setPreviewTheme),G=y.useCallback(()=>B(n),[B,n]),[ie,ue,m,q]=re(r),[te,pe,f,E]=re(a),[P,ce,ve,W]=re(o),[De,Oe,ne,ye]=re(l),[Te,C,Le,Ae]=re(d),[R,V,D,je]=re(u),[ge,fe,_e,Pe]=re(x);function rt(){T(),G(),m(),f(),j(),S(),ve(),ne(),Le(),D(),_e()}return{reset:rt,changed:K||q||E||W||L||w||ye||Ae||je||Pe,theme:{state:A,set:N,changed:K},appLanguage:{state:ie,set:ue,changed:q},subtitleStyling:{state:te,set:pe,changed:E},deviceName:{state:P,set:ce,changed:W},proxyUrls:{state:b,set:p,changed:w},backendUrl:{state:z,set:O,changed:L},profile:{state:De,set:Oe,changed:ye},enableThumbnails:{state:Te,set:C,changed:Ae},enableAutoplay:{state:R,set:V,changed:je},sourceOrder:{state:ge,set:fe,changed:Pe}}}function st(n){return t.jsx("div",{className:Z("w-full rounded-lg bg-settings-card-background bg-opacity-[0.15] border border-settings-card-border",n.paddingClass??"px-8 py-6",n.className),children:n.children})}function dn(n){return t.jsx("div",{className:Z("w-full rounded-lg bg-settings-card-altBackground bg-opacity-50",n.paddingClass??"px-8 py-6",n.className),children:n.children})}function br(){const{t:n}=H(),r=ze(),a=Y(d=>d.account),{logout:o}=Cs(),c=Jt("account-delete"),[h,l]=pt(async()=>{!a||!r||(await Ss(r,a),await o(),c.hide())},[o,a,r,c.hide]);return a?t.jsxs("div",{children:[t.jsx(et,{border:!0,children:n("settings.account.actions.title")}),t.jsxs(dn,{paddingClass:"px-6 py-12",className:"grid grid-cols-1 lg:grid-cols-2 gap-6 lg:gap-12",children:[t.jsxs("div",{children:[t.jsx(Qt,{children:n("settings.account.actions.delete.title")}),t.jsx("p",{className:"text-type-text",children:n("settings.account.actions.delete.text")})]}),t.jsx("div",{className:"flex justify-start lg:justify-end items-center",children:t.jsx(ae,{theme:"danger",loading:h.loading,onClick:c.show,children:n("settings.account.actions.delete.button")})})]}),t.jsx(Zt,{id:c.id,children:t.jsxs(Vt,{children:[t.jsx(et,{className:"!mt-0",children:n("settings.account.actions.delete.confirmTitle")}),t.jsx(Is,{children:n("settings.account.actions.delete.confirmDescription")}),t.jsx(ae,{theme:"danger",loading:h.loading,onClick:l,children:n("settings.account.actions.delete.confirmButton")})]})})]}):null}function pr(n){const{t:r}=H();return t.jsx(Zt,{id:n.id,children:t.jsxs(Vt,{children:[t.jsxs("div",{className:"flex justify-between items-center mb-9",children:[t.jsx(et,{className:"!mt-0 !mb-0",children:r("settings.account.profile.title")}),t.jsx(en,{profile:{colorA:n.colorA,colorB:n.colorB,icon:n.userIcon},iconClass:"text-2xl",sizeClass:"w-12 h-12"})]}),t.jsxs("div",{className:"space-y-6",children:[t.jsx(Ht,{label:r("settings.account.profile.firstColor"),value:n.colorA,onInput:n.setColorA}),t.jsx(Ht,{label:r("settings.account.profile.secondColor"),value:n.colorB,onInput:n.setColorB}),t.jsx(Ts,{label:r("settings.account.profile.userIcon"),value:n.userIcon,onInput:n.setUserIcon})]}),t.jsx("div",{className:"flex justify-center mt-8",children:t.jsx(ae,{theme:"purple",className:"!px-20",onClick:n.close,children:r("settings.account.profile.finish")})})]})})}function vr(n){const{t:r}=H(),{logout:a}=tn(),o=Jt("profile-edit");return t.jsxs(st,{paddingClass:"px-8 py-10",className:"!mt-8",children:[t.jsx(pr,{id:o.id,close:o.hide,colorA:n.colorA,setColorA:n.setColorA,colorB:n.colorB,setColorB:n.setColorB,userIcon:n.userIcon,setUserIcon:n.setUserIcon}),t.jsxs("div",{className:"grid lg:grid-cols-[auto,1fr] gap-8",children:[t.jsx("div",{children:t.jsx(en,{profile:{colorA:n.colorA,colorB:n.colorB,icon:n.userIcon},iconClass:"text-5xl",sizeClass:"w-32 h-32",bottom:t.jsxs("button",{type:"button",className:"tabbable text-xs flex gap-2 items-center bg-editBadge-bg text-editBadge-text hover:bg-editBadge-bgHover py-1 px-3 rounded-full cursor-pointer",onClick:o.show,children:[t.jsx(de,{icon:$.EDIT}),r("settings.account.accountDetails.editProfile")]})})}),t.jsx("div",{children:t.jsxs("div",{className:"space-y-8 max-w-xs",children:[t.jsx(xt,{label:r("settings.account.accountDetails.deviceNameLabel")??void 0,placeholder:r("settings.account.accountDetails.deviceNamePlaceholder")??void 0,value:n.deviceName,onChange:c=>n.setDeviceName(c)}),t.jsx("div",{className:"flex space-x-3",children:t.jsx(ae,{theme:"danger",onClick:a,children:r("settings.account.accountDetails.logoutButton")})})]})})]})]})}function qt(n){const{t:r}=H();return t.jsxs("div",{className:Z({"pointer-events-none overflow-hidden w-full rounded":!0,"aspect-video relative":!n.fullscreen,"fixed inset-0 z-[60]":n.fullscreen}),children:[n.fullscreen&&n.show?t.jsx(ws,{children:t.jsx("html",{"data-no-scroll":!0})}):null,t.jsx(nn,{animation:"fade",show:n.show,children:t.jsxs("div",{className:"absolute inset-0 pointer-events-auto",style:{backgroundImage:"radial-gradient(102.95% 87.07% at 100% 100%, #EEAA45 0%, rgba(165, 186, 151, 0.56) 54.69%, rgba(74, 207, 254, 0.00) 100%), linear-gradient(180deg, #48D3FF 0%, #3B27B2 100%)"},children:[t.jsx("button",{type:"button",className:"tabbable bg-black absolute right-3 top-3 text-white bg-opacity-25 duration-100 transition-[background-color,transform] active:scale-110 hover:bg-opacity-50 p-2 rounded-md cursor-pointer",onClick:n.onToggle,children:t.jsx(de,{icon:n.fullscreen?$.X:$.EXPAND})}),t.jsx("div",{className:"text-white pointer-events-none absolute flex w-full flex-col items-center transition-[bottom] bottom-0 p-4",children:t.jsx("div",{className:n.fullscreen?"":"transform origin-bottom text-[0.5rem]",children:t.jsx(Ps,{text:r("settings.subtitles.previewQuote")??void 0,styling:n.styling,overrideCasing:!1})})})]})})]})}function yr(n){const{t:r}=H(),[a,o]=y.useState(!1);return t.jsxs("div",{children:[t.jsx(Ke,{border:!0,children:r("settings.subtitles.title")}),t.jsxs("div",{className:"grid md:grid-cols-[1fr,356px] gap-8",children:[t.jsxs("div",{className:"space-y-6",children:[t.jsx(ft,{label:r("settings.subtitles.backgroundLabel"),max:100,min:0,onChange:c=>n.setStyling({...n.styling,backgroundOpacity:c/100}),value:n.styling.backgroundOpacity*100,textTransformer:c=>`${c}%`}),t.jsx(ft,{label:r("settings.subtitles.backgroundBlurLabel"),max:100,min:0,onChange:c=>n.setStyling({...n.styling,backgroundBlur:c/100}),value:n.styling.backgroundBlur*1,textTransformer:c=>`${c}%`}),t.jsx(ft,{label:r("settings.subtitles.textSizeLabel"),max:200,min:1,textTransformer:c=>`${c}%`,onChange:c=>n.setStyling({...n.styling,size:c/100}),value:n.styling.size*100}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx(zt.FieldTitle,{children:r("settings.subtitles.textBoldLabel")}),t.jsx("div",{className:"flex justify-center items-center",children:t.jsx(He,{enabled:n.styling.bold,onClick:()=>n.setStyling({...n.styling,bold:!n.styling.bold})})})]}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx(zt.FieldTitle,{children:r("settings.subtitles.colorLabel")}),t.jsx("div",{className:"flex justify-center items-center",children:As.map(c=>t.jsx(_s,{onClick:()=>n.setStyling({...n.styling,color:c}),color:c,active:n.styling.color===c},c))})]})]}),t.jsx(qt,{show:!0,styling:n.styling,onToggle:()=>o(c=>!c)}),t.jsx(qt,{show:a,fullscreen:!0,styling:n.styling,onToggle:()=>o(c=>!c)})]})]})}function jr(n){let{proxyUrls:r,setProxyUrls:a}=n;const{t:o}=H(),c=y.useCallback(()=>{a(d=>[...d??[],""])},[a]),h=y.useCallback((d,u)=>{a(x=>[...(x??[]).map((b,p)=>p!==d?b:u)])},[a]),l=y.useCallback(d=>{a(u=>[...(u??[]).filter((x,b)=>b!==d)])},[a]);return t.jsxs(st,{children:[t.jsxs("div",{className:"flex justify-between items-center gap-4",children:[t.jsxs("div",{className:"my-3",children:[t.jsx("p",{className:"text-white font-bold mb-3",children:o("settings.connections.workers.label")}),t.jsx("p",{className:"max-w-[20rem] font-medium",children:t.jsx(on,{i18nKey:"settings.connections.workers.description",children:t.jsx(sn,{to:"https://docs.undi.rest/proxy/deploy",children:"Proxy documentation"})})})]}),t.jsx("div",{children:t.jsx(He,{onClick:()=>a(d=>d===null?[]:null),enabled:r!==null})})]}),r!==null?t.jsxs(t.Fragment,{children:[t.jsx(bt,{marginClass:"my-6 px-8 box-content -mx-8"}),t.jsx("p",{className:"text-white font-bold mb-3",children:o("settings.connections.workers.urlLabel")}),t.jsxs("div",{className:"my-6 space-y-2 max-w-md",children:[((r==null?void 0:r.length)??0)===0?t.jsx("p",{children:o("settings.connections.workers.emptyState")}):null,(r??[]).map((d,u)=>t.jsxs("div",{className:"grid grid-cols-[1fr,auto] items-center gap-2",children:[t.jsx(xt,{value:d,onChange:x=>h(u,x),placeholder:o("settings.connections.workers.urlPlaceholder")??void 0}),t.jsx("button",{type:"button",onClick:()=>l(u),className:"h-full scale-90 hover:scale-100 rounded-full aspect-square bg-authentication-inputBg hover:bg-authentication-inputBgHover flex justify-center items-center transition-transform duration-200 hover:text-white cursor-pointer",children:t.jsx(de,{className:"text-xl",icon:$.X})})]},u))]}),t.jsx(ae,{theme:"purple",onClick:c,children:o("settings.connections.workers.addButton")})]}):null]})}function wr(n){let{backendUrl:r,setBackendUrl:a}=n;const{t:o}=H();return t.jsxs(st,{children:[t.jsxs("div",{className:"flex justify-between items-center gap-4",children:[t.jsxs("div",{className:"my-3",children:[t.jsx("p",{className:"text-white font-bold mb-3",children:o("settings.connections.server.label")}),t.jsx("p",{className:"max-w-[20rem] font-medium",children:t.jsx(on,{i18nKey:"settings.connections.server.description",children:t.jsx(sn,{to:"https://docs.undi.rest/backend/deploy",children:"Backend documentation"})})})]}),t.jsx("div",{children:t.jsx(He,{onClick:()=>a(c=>c===null?"":null),enabled:r!==null})})]}),r!==null?t.jsxs(t.Fragment,{children:[t.jsx(bt,{marginClass:"my-6 px-8 box-content -mx-8"}),t.jsx("p",{className:"text-white font-bold mb-3",children:o("settings.connections.server.urlLabel")}),t.jsx(xt,{onChange:a,value:r??""})]}):null]})}function Nr(n){const{t:r}=H();return t.jsxs("div",{children:[t.jsx(Ke,{border:!0,children:r("settings.connections.title")}),t.jsxs("div",{className:"space-y-6",children:[t.jsx(jr,{proxyUrls:n.proxyUrls,setProxyUrls:n.setProxyUrls}),t.jsx(wr,{backendUrl:n.backendUrl,setBackendUrl:n.setBackendUrl})]})]})}function Cr(n){return t.jsx("p",{className:"text-type-text",children:n.children})}function Sr(n){const{t:r}=H(),a=ze(),o=Y(l=>{var d;return(d=l.account)==null?void 0:d.token}),[c,h]=pt(async()=>{var l;if(!o)throw new Error("No token present");if(!a)throw new Error("No backend set");await Es(a,o,n.id),(l=n.onRemove)==null||l.call(n)},[a,o,n.id]);return t.jsxs(st,{className:"flex justify-between items-center",paddingClass:"px-6 py-4",children:[t.jsxs("div",{className:"font-medium",children:[t.jsx(Cr,{children:r("settings.account.devices.deviceNameLabel")}),t.jsx("p",{className:"text-white",children:n.name})]}),n.isCurrent?null:t.jsx(ae,{theme:"danger",loading:c.loading,onClick:h,children:r("settings.account.devices.removeDevice")})]})}function Ir(n){const{t:r}=H(),a=Y(l=>{var d;return(d=l.account)==null?void 0:d.seed}),o=n.sessions,c=Y(l=>{var d;return(d=l.account)==null?void 0:d.sessionId}),h=y.useMemo(()=>{if(!a)return[];let l=o.map(d=>{const u=rn(d.device,ht(a));return{current:d.id===c,id:d.id,name:u}});return l=l.sort((d,u)=>d.current?-1:u.current?1:d.name.localeCompare(u.name)),l},[a,o,c]);return a?t.jsxs("div",{children:[t.jsx(et,{border:!0,className:"mt-0 mb-9",children:r("settings.account.devices.title")}),n.error?t.jsx("p",{children:r("settings.account.devices.failed")}):n.loading?t.jsx(ks,{}):t.jsx("div",{className:"space-y-5",children:h.map(l=>t.jsx(Sr,{name:l.name,id:l.id,isCurrent:l.current,onRemove:n.onChange},l.id))})]}):null}function Tr(){const n=Ns(),{t:r}=H();return t.jsx("div",{children:t.jsxs(dn,{paddingClass:"px-6 py-12",className:"grid grid-cols-2 gap-12 mt-5",children:[t.jsxs("div",{children:[t.jsx(Qt,{children:r("settings.account.register.title")}),t.jsx("p",{className:"text-type-text",children:r("settings.account.register.text")})]}),t.jsx("div",{className:"flex justify-end items-center",children:t.jsx(ae,{theme:"purple",onClick:()=>n("/register"),children:r("settings.account.register.cta")})})]})})}function Xt(n){return t.jsxs("section",{className:n.className??"",children:[t.jsx("p",{className:"text-sm font-bold uppercase text-settings-sidebar-type-secondary mb-2",children:n.title}),n.children]})}function Ar(n){return t.jsxs("button",{type:"button",onClick:n.onClick,className:Z("tabbable w-full px-3 py-2 flex items-center space-x-3 cursor-pointer rounded my-2",n.active?"bg-settings-sidebar-activeLink text-settings-sidebar-type-activated":null),children:[t.jsx(de,{className:Z("text-2xl text-settings-sidebar-type-icon",n.active?"text-settings-sidebar-type-iconActivated":null),icon:n.icon}),t.jsx("span",{children:n.children})]})}const _r=16;function Pr(n){const{t:r}=H(),a=n.url?n.url.startsWith("https://"):!1;return t.jsxs("div",{className:"flex items-center gap-1 -mx-1 ml-3 px-1 rounded bg-largeCard-background font-bold",children:[t.jsx(de,{icon:a?$.LOCK:$.UNLOCK}),r(a?"settings.sidebar.info.secure":"settings.sidebar.info.insecure")]})}function kr(){var b;const{t:n}=H(),{isMobile:r}=an(),{account:a}=Y(),o=location.hostname,[c,h]=y.useState(""),l=[{textKey:"settings.account.title",id:"settings-account",icon:$.USER},{textKey:"settings.preferences.title",id:"settings-preferences",icon:$.SETTINGS},{textKey:"settings.appearance.title",id:"settings-appearance",icon:$.BRUSH},{textKey:"settings.subtitles.title",id:"settings-captions",icon:$.CAPTIONS},{textKey:"settings.connections.title",id:"settings-connection",icon:$.LINK}],d=ze(),u=qs(async()=>{if(d)return Ds(d)},[d]);y.useEffect(()=>{function p(){var O;const w=(window.innerHeight||document.documentElement.clientHeight)/4,z=l.map(S=>{const L=document.getElementById(S.id);if(!L)return{distance:1/0,link:S.id};const A=L.getBoundingClientRect(),N=Math.abs(w-A.top),T=Math.abs(w-A.bottom);return{distance:Math.min(T,N),link:S.id}}).sort((S,L)=>S.distance-L.distance);window.innerHeight+window.scrollY>=document.body.offsetHeight?h(l[l.length-1].id):h(((O=z[0])==null?void 0:O.link)??"")}return document.addEventListener("scroll",p),p(),()=>{document.removeEventListener("scroll",p)}});const x=y.useCallback(p=>{const j=document.getElementById(p);if(!j)return null;const w=j.getBoundingClientRect().top+window.scrollY;window.scrollTo({top:w-120,behavior:"smooth"})},[]);return t.jsx("div",{className:"text-settings-sidebar-type-inactive sidebar-boundary",children:t.jsxs(Xs,{topOffset:-6*_r,stickyClassName:"pt-[6rem]",disabled:r,hideOnBoundaryHit:!1,boundaryElement:".sidebar-boundary",children:[t.jsxs("div",{className:"hidden lg:block",children:[t.jsx(Xt,{title:n("global.pages.settings"),children:l.map(p=>t.jsx(Ar,{icon:p.icon,active:p.id===c,onClick:()=>x(p.id),children:n(p.textKey)},p.id))}),t.jsx(bt,{})]}),t.jsx(Xt,{className:"text-sm",title:n("settings.sidebar.info.title"),children:t.jsxs("div",{className:"px-3 py-3.5 rounded-lg bg-largeCard-background bg-opacity-50 grid grid-cols-2 gap-4",children:[t.jsxs("div",{className:"col-span-2 space-y-1",children:[t.jsx("p",{className:"text-type-dimmed font-medium",children:n("settings.sidebar.info.hostname")}),t.jsx("p",{className:"text-white",children:o})]}),t.jsxs("div",{className:"col-span-2 space-y-1",children:[t.jsxs("div",{className:"text-type-dimmed font-medium flex items-center",children:[t.jsx("p",{children:n("settings.sidebar.info.backendUrl")}),t.jsx(Pr,{url:d})]}),t.jsx("p",{className:"text-white",children:(d==null?void 0:d.replace(/https?:\/\//,""))??"—"})]}),t.jsxs("div",{className:"col-span-2 space-y-1",children:[t.jsx("p",{className:"text-type-dimmed font-medium",children:n("settings.sidebar.info.userId")}),t.jsx("p",{className:"text-white",children:(a==null?void 0:a.userId)??n("settings.sidebar.info.notLoggedIn")})]}),t.jsxs("div",{className:"col-span-1 space-y-1",children:[t.jsx("p",{className:"text-type-dimmed font-medium",children:n("settings.sidebar.info.appVersion")}),t.jsx("p",{className:"text-type-dimmed px-2 py-1 rounded bg-settings-sidebar-badge inline-block",children:Os().APP_VERSION})]}),t.jsxs("div",{className:"col-span-1 space-y-1",children:[t.jsx("p",{className:"text-type-dimmed font-medium",children:n("settings.sidebar.info.backendVersion")}),t.jsxs("p",{className:"text-type-dimmed px-2 py-1 rounded bg-settings-sidebar-badge inline-flex items-center gap-1",children:[u.error?t.jsx(de,{icon:$.WARNING,className:"text-type-danger text-base"}):null,u.loading?t.jsx("span",{className:"block h-4 w-12 bg-type-dimmed/20 rounded"}):((b=u==null?void 0:u.value)==null?void 0:b.version)||n("settings.sidebar.info.unknownVersion")]})]})]})})]})})}const Er=[{id:"default",selector:"theme-default",key:"settings.appearance.themes.default"},{id:"teal",selector:"theme-teal",key:"settings.appearance.themes.teal"},{id:"red",selector:"theme-red",key:"settings.appearance.themes.red"},{id:"gray",selector:"theme-gray",key:"settings.appearance.themes.gray"},{id:"blck",selector:"theme-blck",key:"settings.appearance.themes.blck"}],Dr=function(r){const{t:a}=H();return t.jsxs("div",{className:Z(r.selector,"cursor-pointer group tabbable"),onClick:r.onClick,children:[t.jsxs("div",{tabIndex:0,onKeyUp:o=>o.key==="Enter"&&o.currentTarget.click(),className:Z("tabbable scroll-mt-32 w-full h-32 relative rounded-lg border bg-gradient-to-br from-themePreview-primary/20 to-themePreview-secondary/10 bg-clip-content transition-colors duration-150",r.active?"border-themePreview-primary":"border-transparent group-hover:border-white/20"),children:[t.jsxs("div",{className:"absolute top-2 left-2",children:[t.jsx("div",{className:"h-5 w-5 bg-themePreview-primary rounded-full"}),t.jsx("div",{className:"h-5 w-5 bg-themePreview-secondary rounded-full -mt-2"})]}),t.jsx(de,{icon:$.CHECKMARK,className:Z("absolute top-3 right-3 text-xs text-white transition-opacity duration-150",r.active?"opacity-100":"opacity-0")}),t.jsx("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 w-3/5 h-4/5 rounded-t-lg -mb-px bg-background-main overflow-hidden",children:t.jsxs("div",{className:"relative w-full h-full",children:[t.jsx("div",{className:"bg-themePreview-primary/50 w-[130%] h-10 absolute left-1/2 -top-5 blur-xl transform -translate-x-1/2 rounded-[100%]"}),t.jsxs("div",{className:"p-2 flex justify-between items-center",children:[t.jsxs("div",{className:"flex space-x-1",children:[t.jsx("div",{className:"bg-themePreview-ghost bg-opacity-10 w-4 h-2 rounded-full"}),t.jsx("div",{className:"bg-themePreview-ghost bg-opacity-10 w-2 h-2 rounded-full"}),t.jsx("div",{className:"bg-themePreview-ghost bg-opacity-10 w-2 h-2 rounded-full"})]}),t.jsx("div",{className:"bg-themePreview-ghost bg-opacity-10 w-2 h-2 rounded-full"})]}),t.jsxs("div",{className:"mt-1 flex items-center flex-col gap-1",children:[t.jsx("div",{className:"bg-themePreview-ghost bg-opacity-20 w-8 h-0.5 rounded-full"}),t.jsx("div",{className:"bg-themePreview-ghost bg-opacity-20 w-6 h-0.5 rounded-full"}),t.jsx("div",{className:"bg-themePreview-ghost bg-opacity-10 w-16 h-2 mt-1 rounded-full"})]}),t.jsxs("div",{className:"mt-5 px-3",children:[t.jsxs("div",{className:"flex gap-1 items-center",children:[t.jsx("div",{className:"bg-themePreview-ghost bg-opacity-20 w-2 h-2 rounded-full"}),t.jsx("div",{className:"bg-themePreview-ghost bg-opacity-20 w-8 h-0.5 rounded-full"})]}),t.jsxs("div",{className:"flex w-full gap-1 mt-1",children:[t.jsx("div",{className:"bg-themePreview-ghost bg-opacity-10 w-full h-20 rounded"}),t.jsx("div",{className:"bg-themePreview-ghost bg-opacity-10 w-full h-20 rounded"}),t.jsx("div",{className:"bg-themePreview-ghost bg-opacity-10 w-full h-20 rounded"}),t.jsx("div",{className:"bg-themePreview-ghost bg-opacity-10 w-full h-20 rounded"})]})]})]})})]}),t.jsxs("div",{className:"mt-2 flex justify-between items-center",children:[t.jsx("span",{className:"font-medium text-white",children:r.name}),t.jsx("span",{className:Z("inline-block px-3 py-1 leading-tight text-sm transition-opacity duration-150 rounded-full bg-pill-activeBackground text-white/85",r.inUse?"opacity-100":"opacity-0 pointer-events-none"),children:a("settings.appearance.activeTheme")})]})]})},Or=Dr;function Lr(n){const{t:r}=H();return t.jsxs("div",{children:[t.jsx(Ke,{border:!0,children:r("settings.appearance.title")}),t.jsx("div",{className:"grid grid-cols-[repeat(auto-fill,minmax(160px,1fr))] gap-6 max-w-[700px]",children:Er.map(a=>t.jsx(Or,{selector:a.selector,active:n.active===a.id,inUse:n.inUse===a.id,name:r(a.key),onClick:()=>n.setTheme(a.id)},a.id))})]})}function yt(n,r,a){const o=n.slice();return o.splice(a<0?o.length+a:a,0,o.splice(r,1)[0]),o}function Br(n,r){return n.reduce((a,o,c)=>{const h=r.get(o);return h&&(a[c]=h),a},Array(n.length))}function Ze(n){return n!==null&&n>=0}function Ur(n,r){if(n===r)return!0;if(n.length!==r.length)return!1;for(let a=0;a<n.length;a++)if(n[a]!==r[a])return!1;return!0}function Rr(n){return typeof n=="boolean"?{draggable:n,droppable:n}:n}const un=n=>{let{rects:r,activeIndex:a,overIndex:o,index:c}=n;const h=yt(r,o,a),l=r[c],d=h[c];return!d||!l?null:{x:d.left-l.left,y:d.top-l.top,scaleX:d.width/l.width,scaleY:d.height/l.height}},Ve={scaleX:1,scaleY:1},Mr=n=>{var r;let{activeIndex:a,activeNodeRect:o,index:c,rects:h,overIndex:l}=n;const d=(r=h[a])!=null?r:o;if(!d)return null;if(c===a){const x=h[l];return x?{x:0,y:a<l?x.top+x.height-(d.top+d.height):x.top-d.top,...Ve}:null}const u=Hr(h,c,a);return c>a&&c<=l?{x:0,y:-d.height-u,...Ve}:c<a&&c>=l?{x:0,y:d.height+u,...Ve}:{x:0,y:0,...Ve}};function Hr(n,r,a){const o=n[r],c=n[r-1],h=n[r+1];return o?a<r?c?o.top-(c.top+c.height):h?h.top-(o.top+o.height):0:h?h.top-(o.top+o.height):c?o.top-(c.top+c.height):0:0}const gn="Sortable",fn=Yt.createContext({activeIndex:-1,containerId:gn,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:un,disabled:{draggable:!1,droppable:!1}});function zr(n){let{children:r,id:a,items:o,strategy:c=un,disabled:h=!1}=n;const{active:l,dragOverlay:d,droppableRects:u,over:x,measureDroppableContainers:b}=Ys(),p=Js(gn,a),j=d.rect!==null,w=y.useMemo(()=>o.map(B=>typeof B=="object"&&"id"in B?B.id:B),[o]),z=l!=null,O=l?w.indexOf(l.id):-1,S=x?w.indexOf(x.id):-1,L=y.useRef(w),A=!Ur(w,L.current),N=S!==-1&&O===-1||A,T=Rr(h);ln(()=>{A&&z&&b(w)},[A,w,z,b]),y.useEffect(()=>{L.current=w},[w]);const K=y.useMemo(()=>({activeIndex:O,containerId:p,disabled:T,disableTransforms:N,items:w,overIndex:S,useDragOverlay:j,sortedRects:Br(w,u),strategy:c}),[O,p,T.draggable,T.droppable,N,w,S,u,j,c]);return Yt.createElement(fn.Provider,{value:K},r)}const Kr=n=>{let{id:r,items:a,activeIndex:o,overIndex:c}=n;return yt(a,o,c).indexOf(r)},Fr=n=>{let{containerId:r,isSorting:a,wasDragging:o,index:c,items:h,newIndex:l,previousItems:d,previousContainerId:u,transition:x}=n;return!x||!o||d!==h&&c===l?!1:a?!0:l!==c&&r===u},Gr={duration:200,easing:"ease"},mn="transform",$r=vt.Transition.toString({property:mn,duration:0,easing:"linear"}),Wr={roleDescription:"sortable"};function qr(n){let{disabled:r,index:a,node:o,rect:c}=n;const[h,l]=y.useState(null),d=y.useRef(a);return ln(()=>{if(!r&&a!==d.current&&o.current){const u=c.current;if(u){const x=ar(o.current,{ignoreTransform:!0}),b={x:u.left-x.left,y:u.top-x.top,scaleX:u.width/x.width,scaleY:u.height/x.height};(b.x||b.y)&&l(b)}}a!==d.current&&(d.current=a)},[r,a,o,c]),y.useEffect(()=>{h&&l(null)},[h]),h}function Xr(n){let{animateLayoutChanges:r=Fr,attributes:a,disabled:o,data:c,getNewIndex:h=Kr,id:l,strategy:d,resizeObserverConfig:u,transition:x=Gr}=n;const{items:b,containerId:p,activeIndex:j,disabled:w,disableTransforms:z,sortedRects:O,overIndex:S,useDragOverlay:L,strategy:A}=y.useContext(fn),N=Yr(o,w),T=b.indexOf(l),K=y.useMemo(()=>({sortable:{containerId:p,index:T,items:b},...c}),[p,c,T,b]),B=y.useMemo(()=>b.slice(b.indexOf(l)),[b,l]),{rect:G,node:ie,isOver:ue,setNodeRef:m}=Qs({id:l,data:K,disabled:N.droppable,resizeObserverConfig:{updateMeasurementsFor:B,...u}}),{active:q,activatorEvent:te,activeNodeRect:pe,attributes:f,setNodeRef:E,listeners:P,isDragging:ce,over:ve,setActivatorNodeRef:W,transform:De}=Zs({id:l,data:K,attributes:{...Wr,...a},disabled:N.draggable}),Oe=Vs(m,E),ne=!!q,ye=ne&&!z&&Ze(j)&&Ze(S),Te=!L&&ce,C=Te&&ye?De:null,Ae=ye?C??(d??A)({rects:O,activeNodeRect:pe,activeIndex:j,overIndex:S,index:T}):null,R=Ze(j)&&Ze(S)?h({id:l,items:b,activeIndex:j,overIndex:S}):T,V=q==null?void 0:q.id,D=y.useRef({activeId:V,items:b,newIndex:R,containerId:p}),je=b!==D.current.items,ge=r({active:q,containerId:p,isDragging:ce,isSorting:ne,id:l,index:T,items:b,newIndex:D.current.newIndex,previousItems:D.current.items,previousContainerId:D.current.containerId,transition:x,wasDragging:D.current.activeId!=null}),fe=qr({disabled:!ge,index:T,node:ie,rect:G});return y.useEffect(()=>{ne&&D.current.newIndex!==R&&(D.current.newIndex=R),p!==D.current.containerId&&(D.current.containerId=p),b!==D.current.items&&(D.current.items=b)},[ne,R,p,b]),y.useEffect(()=>{if(V===D.current.activeId)return;if(V&&!D.current.activeId){D.current.activeId=V;return}const Pe=setTimeout(()=>{D.current.activeId=V},50);return()=>clearTimeout(Pe)},[V]),{active:q,activeIndex:j,attributes:f,data:K,rect:G,index:T,newIndex:R,items:b,isOver:ue,isSorting:ne,isDragging:ce,listeners:P,node:ie,overIndex:S,over:ve,setNodeRef:Oe,setActivatorNodeRef:W,setDroppableNodeRef:m,setDraggableNodeRef:E,transform:fe??Ae,transition:_e()};function _e(){if(fe||je&&D.current.newIndex===T)return $r;if(!(Te&&!er(te)||!x)&&(ne||ge))return vt.Transition.toString({...x,property:mn})}}function Yr(n,r){var a,o;return typeof n=="boolean"?{draggable:n,droppable:!1}:{draggable:(a=n==null?void 0:n.draggable)!=null?a:r.draggable,droppable:(o=n==null?void 0:n.droppable)!=null?o:r.droppable}}function nt(n){if(!n)return!1;const r=n.data.current;return!!(r&&"sortable"in r&&typeof r.sortable=="object"&&"containerId"in r.sortable&&"items"in r.sortable&&"index"in r.sortable)}const Jr=[be.Down,be.Right,be.Up,be.Left],Qr=(n,r)=>{let{context:{active:a,collisionRect:o,droppableRects:c,droppableContainers:h,over:l,scrollableAncestors:d}}=r;if(Jr.includes(n.code)){if(n.preventDefault(),!a||!o)return;const u=[];h.getEnabled().forEach(p=>{if(!p||p!=null&&p.disabled)return;const j=c.get(p.id);if(j)switch(n.code){case be.Down:o.top<j.top&&u.push(p);break;case be.Up:o.top>j.top&&u.push(p);break;case be.Left:o.left>j.left&&u.push(p);break;case be.Right:o.left<j.left&&u.push(p);break}});const x=tr({active:a,collisionRect:o,droppableRects:c,droppableContainers:u,pointerCoordinates:null});let b=nr(x,"id");if(b===(l==null?void 0:l.id)&&x.length>1&&(b=x[1].id),b!=null){const p=h.get(a.id),j=h.get(b),w=j?c.get(j.id):null,z=j==null?void 0:j.node.current;if(z&&w&&p&&j){const S=sr(z).some((B,G)=>d[G]!==B),L=hn(p,j),A=Zr(p,j),N=S||!L?{x:0,y:0}:{x:A?o.width-w.width:0,y:A?o.height-w.height:0},T={x:w.left,y:w.top};return N.x&&N.y?T:rr(T,N)}}}};function hn(n,r){return!nt(n)||!nt(r)?!1:n.data.current.sortable.containerId===r.data.current.sortable.containerId}function Zr(n,r){return!nt(n)||!nt(r)||!hn(n,r)?!1:n.data.current.sortable.index<r.data.current.sortable.index}function Vr(n){const{attributes:r,listeners:a,setNodeRef:o,transform:c,transition:h}=Xr({id:n.item.id}),l={transform:vt.Transform.toString(c),transition:h};return t.jsxs("div",{ref:o,style:l,...r,...a,className:Z("bg-dropdown-background hover:bg-dropdown-hoverBackground select-none space-x-3 flex items-center max-w-[25rem] py-3 px-4 rounded-lg touch-none",n.item.disabled&&"opacity-50",c?"cursor-grabbing":"cursor-grab"),children:[t.jsx("span",{className:"flex-1 text-white font-bold",children:n.item.name}),n.item.disabled&&t.jsx(de,{icon:$.WARNING}),t.jsx(de,{icon:$.MENU})]})}function ea(n){const r=ir(Wt(dr),Wt(lr,{coordinateGetter:Qr})),a=o=>{const{active:c,over:h}=o;if(h&&c.id!==h.id){const l=n.items,d=l.findIndex(b=>b.id===c.id),u=l.findIndex(b=>b.id===h.id),x=yt(l,d,u);n.setItems(x)}};return t.jsx(cr,{sensors:r,collisionDetection:or,onDragEnd:a,children:t.jsx(zr,{items:n.items,strategy:Mr,children:t.jsx("div",{className:"flex flex-col gap-2",children:n.items.map(o=>t.jsx(Vr,{item:o},o.id))})})})}function ta(n){const{t:r}=H(),a=ur(Kt.map(u=>u.code)),o=Ls(),c=Kt.sort((u,x)=>a.indexOf(u.code)-a.indexOf(x.code)).map(u=>({id:u.code,name:`${u.name}${u.nativeName?` — ${u.nativeName}`:""}`,leftIcon:t.jsx(gr,{langCode:u.code})})),h=c.find(u=>{var x;return u.id===((x=fr(n.language))==null?void 0:x.code)}),l=cn().listSources(),d=y.useMemo(()=>{const u=Bs().listSources();return n.sourceOrder.map(x=>{var b;return{id:x,name:((b=l.find(p=>p.id===x))==null?void 0:b.name)||x,disabled:!u.find(p=>p.id===x)}})},[n.sourceOrder,l]);return t.jsxs("div",{className:"space-y-12",children:[t.jsx(Ke,{border:!0,children:r("settings.preferences.title")}),t.jsxs("div",{children:[t.jsx("p",{className:"text-white font-bold mb-3",children:r("settings.preferences.language")}),t.jsx("p",{className:"max-w-[20rem] font-medium",children:r("settings.preferences.languageDescription")}),t.jsx(Us,{options:c,selectedItem:h||c[0],setSelectedItem:u=>n.setLanguage(u.id)})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-white font-bold mb-3",children:r("settings.preferences.ads")}),t.jsx("p",{className:"max-w-[25rem] font-medium",children:r("settings.preferences.adsDescription")})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-white font-bold mb-3",children:r("settings.preferences.thumbnail")}),t.jsx("p",{className:"max-w-[25rem] font-medium",children:r("settings.preferences.thumbnailDescription")}),t.jsxs("div",{onClick:()=>n.setEnableThumbnails(!n.enableThumbnails),className:"bg-dropdown-background hover:bg-dropdown-hoverBackground select-none my-4 cursor-pointer space-x-3 flex items-center max-w-[25rem] py-3 px-4 rounded-lg",children:[t.jsx(He,{enabled:n.enableThumbnails}),t.jsx("p",{className:"flex-1 text-white font-bold",children:r("settings.preferences.thumbnailLabel")})]})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-white font-bold mb-3",children:r("settings.preferences.autoplay")}),t.jsx("p",{className:"max-w-[25rem] font-medium",children:r("settings.preferences.autoplayDescription")}),t.jsxs("div",{onClick:()=>o?n.setEnableAutoplay(!n.enableAutoplay):null,className:Z("bg-dropdown-background hover:bg-dropdown-hoverBackground select-none my-4 cursor-pointer space-x-3 flex items-center max-w-[25rem] py-3 px-4 rounded-lg",o?"cursor-pointer opacity-100 pointer-events-auto":"cursor-not-allowed opacity-50 pointer-events-none"),children:[t.jsx(He,{enabled:n.enableAutoplay&&o}),t.jsx("p",{className:"flex-1 text-white font-bold",children:r("settings.preferences.autoplayLabel")})]})]}),t.jsxs("div",{className:"flex flex-col gap-3",children:[t.jsx("p",{className:"text-white font-bold",children:r("settings.preferences.sourceOrder")}),t.jsx("p",{className:"max-w-[25rem] font-medium",children:r("settings.preferences.sourceOrderDescription")}),t.jsx(ea,{items:d,setItems:u=>n.setSourceOrder(u.map(x=>x.id))}),t.jsx(ae,{className:"max-w-[25rem]",theme:"secondary",onClick:()=>n.setSourceOrder(l.map(u=>u.id)),children:r("settings.reset")})]})]})}function na(n){const{isMobile:r}=an();return t.jsx($s,{ultraWide:!0,classNames:"overflow-visible",children:t.jsxs("div",{className:Z("grid gap-12",r?"grid-cols-1":"lg:grid-cols-[280px,1fr]"),children:[t.jsx(kr,{}),t.jsx("div",{children:n.children})]})})}function sa(n){const r=ze(),{account:a}=n,[o,c]=pt(()=>r?Rs(r,a):Promise.resolve([]),[a,r]);return y.useEffect(()=>{c()},[c]),t.jsxs(t.Fragment,{children:[t.jsx(vr,{deviceName:n.deviceName,setDeviceName:n.setDeviceName,colorA:n.colorA,setColorA:n.setColorA,colorB:n.colorB,setColorB:n.setColorB,userIcon:n.userIcon,setUserIcon:n.setUserIcon}),t.jsx(Ir,{error:!!o.error,loading:o.loading,sessions:o.value??[],onChange:c}),t.jsx(br,{})]})}function fa(){const{t:n}=H(),r=Ft(f=>f.theme),a=Ft(f=>f.setTheme),o=mt(f=>f.previewTheme),c=mt(f=>f.setPreviewTheme),h=Gt(f=>f.language),l=Gt(f=>f.setLanguage),d=$t(f=>f.styling),u=$t(f=>f.updateStyling),x=Y(f=>f.proxySet),b=Y(f=>f.setProxySet),p=Y(f=>f.backendUrl),j=Y(f=>f.setBackendUrl),w=Ee(f=>f.enableThumbnails),z=Ee(f=>f.setEnableThumbnails),O=Ee(f=>f.enableAutoplay),S=Ee(f=>f.setEnableAutoplay),L=Ee(f=>f.sourceOrder),A=Ee(f=>f.setSourceOrder),N=Y(f=>f.account),T=Y(f=>f.setAccountProfile),K=Y(f=>f.updateDeviceName),B=y.useMemo(()=>N?rn(N.deviceName,ht(N.seed)):"",[N]),G=ze(),{logout:ie}=tn(),ue=Y(),m=xr(r,h,d,B,x,p,N==null?void 0:N.profile,w,O,L),q=y.useMemo(()=>{const f=cn().listSources(),E=f.map(W=>W.id),P=m.sourceOrder.state,ce=P.filter(W=>E.includes(W)),ve=f.filter(W=>!P.includes(W.id)).map(W=>W.id);return[...ce,...ve]},[m.sourceOrder.state]);y.useEffect(()=>{c(r??"default")},[c,r]),y.useEffect(()=>()=>{c(null)},[c]);const te=y.useCallback(f=>{m.theme.set(f==="default"?null:f),c(f)},[m.theme,c]),pe=y.useCallback(async()=>{var f,E;if(N&&G){if((m.appLanguage.changed||m.theme.changed||m.proxyUrls.changed)&&await Ms(G,N,{applicationLanguage:m.appLanguage.state,applicationTheme:m.theme.state,proxyUrls:((f=m.proxyUrls.state)==null?void 0:f.filter(P=>P!==""))??null}),m.deviceName.changed){const P=await Hs(m.deviceName.state,ht(N.seed));await zs(G,N,{deviceName:P}),K(P)}m.profile.changed&&await Ks(G,N,{profile:m.profile.state})}if(z(m.enableThumbnails.state),S(m.enableAutoplay.state),A(m.sourceOrder.state),l(m.appLanguage.state),a(m.theme.state),u(m.subtitleStyling.state),b(((E=m.proxyUrls.state)==null?void 0:E.filter(P=>P!==""))??null),m.profile.state&&T(m.profile.state),m.backendUrl.changed){await ie();let P=m.backendUrl.state;P&&!P.startsWith("http://")&&!P.startsWith("https://")&&(P=`https://${P}`),j(P)}},[N,G,z,m,S,A,l,a,u,b,K,T,ie,j]);return t.jsxs(Fs,{children:[t.jsx(Gs,{subpage:!0,k:"global.pages.settings"}),t.jsxs(na,{children:[t.jsxs("div",{id:"settings-account",children:[t.jsx(Ke,{border:!0,className:"!mb-0",children:n("settings.account.title")}),ue.account&&m.profile.state?t.jsx(sa,{account:ue.account,deviceName:m.deviceName.state,setDeviceName:m.deviceName.set,colorA:m.profile.state.colorA,setColorA:f=>{m.profile.set(E=>E?{...E,colorA:f}:void 0)},colorB:m.profile.state.colorB,setColorB:f=>m.profile.set(E=>E?{...E,colorB:f}:void 0),userIcon:m.profile.state.icon,setUserIcon:f=>m.profile.set(E=>E?{...E,icon:f}:void 0)}):t.jsx(Tr,{})]}),t.jsx("div",{id:"settings-preferences",className:"mt-48",children:t.jsx(ta,{language:m.appLanguage.state,setLanguage:m.appLanguage.set,enableThumbnails:m.enableThumbnails.state,setEnableThumbnails:m.enableThumbnails.set,enableAutoplay:m.enableAutoplay.state,setEnableAutoplay:m.enableAutoplay.set,sourceOrder:q,setSourceOrder:m.sourceOrder.set})}),t.jsx("div",{id:"settings-appearance",className:"mt-48",children:t.jsx(Lr,{active:o??"default",inUse:r??"default",setTheme:te})}),t.jsx("div",{id:"settings-captions",className:"mt-48",children:t.jsx(yr,{styling:m.subtitleStyling.state,setStyling:m.subtitleStyling.set})}),t.jsx("div",{id:"settings-connection",className:"mt-48",children:t.jsx(Nr,{backendUrl:m.backendUrl.state,setBackendUrl:m.backendUrl.set,proxyUrls:m.proxyUrls.state,setProxyUrls:m.proxyUrls.set})})]}),t.jsxs(nn,{animation:"fade",show:m.changed,className:"bg-settings-saveBar-background border-t border-settings-card-border/50 py-4 transition-opacity w-full fixed bottom-0 flex justify-between flex-col md:flex-row px-8 items-start md:items-center gap-3",children:[t.jsx("p",{className:"text-type-danger",children:n("settings.unsaved")}),t.jsxs("div",{className:"space-x-3 w-full md:w-auto flex",children:[t.jsx(ae,{className:"w-full md:w-auto",theme:"secondary",onClick:m.reset,children:n("settings.reset")}),t.jsx(ae,{className:"w-full md:w-auto",theme:"purple",onClick:pe,children:n("settings.save")})]})]})]})}export{sa as AccountSettings,fa as SettingsPage,fa as default};
//# sourceMappingURL=Settings-VPGtjrIC.js.map
